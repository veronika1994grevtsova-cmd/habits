<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=" />
  <title> Трекер привычки </title>
  
 <style>
  body{ 
   margin:0;
      font-family: system-ui, -apple-system, Arial;
      background:#f6f7fb;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:16px;
    }
    .card{
      width:min(520px, 100%);
      background:#fff;
      border-radius:16px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);
    }
    h1{margin:0 0 12px; font-size:26px}
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px;
      border:1px solid #e5e7eb;
      border-radius:14px;
    }
    .name{font-size:18px; font-weight:700}
    .status{margin-top:10px; color:#6b7280}
    input[type="checkbox"]{
      width:26px;
      height:26px;
    }
  </style>
</head>

<link rel="stylesheet" href="style.css">

<body>
  <section class="card ">
    <h1>Сегодня</h1>

    <div class="progress">
  Выполнено сегодня: <span id="donePercent">0%</span>
</div>

   <div class="habit" data-key="water">
    <div class="row">
      <div class="name">Вода (2 литра)</div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

 <div class="habit" data-key="no-alcohol">
    <div class="row">
      <div class="name">Без алкоголя </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

 <div class="habit" data-key="reading-30">
    <div class="row">
      <div class="name">Чтение 30 минут </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

 <div class="habit" data-key="cleaning-1h">
    <div class="row">
      <div class="name">Уборка 1 час </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

 <div class="habit" data-key="nosmoking">
    <div class="row">
      <div class="name">Без курения </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

 <div class="habit" data-key="study-1h">
    <div class="row">
      <div class="name">Учеба 1 час </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

<div class="habit" data-key="treadmill-30">
    <div class="row">
      <div class="name"> Ходьба на беговой дорожке 30 минут </div>
      <input type="checkbox" />
    </div>
    <div class="status">Не сделано</div>
    </div>

  </section>

  <script>
  // Ключ дня: YYYY-MM-DD (локальная дата)
  function todayKey() {
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth() + 1).padStart(2, "0");
    const day = String(d.getDate()).padStart(2, "0");
    return `${y}-${m}-${day}`;
  }

  const STORAGE_KEY = "habits_" + todayKey();

  function loadState() {
    try {
      return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
    } catch {
      return {};
    }
  }

  function saveState(state) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }

  function setUI(card, checked) {
    const checkbox = card.querySelector('input[type="checkbox"]');
    const status = card.querySelector(".status");

    checkbox.checked = !!checked;
    status.textContent = checked ? "Сделано" : "Не сделано";
  }

  const cards = document.querySelectorAll(".habit");
  const state = loadState();

  // 1) Восстановить сохранённые значения
  cards.forEach(card => {
    const key = card.dataset.key;
    setUI(card, state[key]);
  });

  // 2) Сохранять изменения
  cards.forEach(card => {
    const key = card.dataset.key;
    const checkbox = card.querySelector('input[type="checkbox"]');

    checkbox.addEventListener("change", () => {
      state[key] = checkbox.checked;
      saveState(state);
      setUI(card, checkbox.checked);
    });
  });
</script>

<script>
  function updateProgress() {
    const habits = document.querySelectorAll(".habit");
    const total = habits.length;
    const checked = document.querySelectorAll(".habit input[type='checkbox']:checked").length;

    const percent = total === 0 ? 0 : Math.round((checked / total) * 100);
    document.getElementById("donePercent").textContent = percent + "%";
  }

  // навесим обработчики на все чекбоксы
  document.querySelectorAll(".habit input[type='checkbox']").forEach(cb => {
    cb.addEventListener("change", updateProgress);
  });

  // чтобы сразу посчиталось при открытии
  updateProgress();
</script>



</body>
</html>

